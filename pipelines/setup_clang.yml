parameters:
    version: 0

steps:
  - script: |
      echo "##vso[task.setvariable variable=CXX;]${CXX}"
      echo "##vso[task.setvariable variable=CC;]${CC}"

      if [ "${{ parameters.version }}" = "13" ]
      then # see https://apt.llvm.org/
        wget https://apt.llvm.org/llvm-snapshot.gpg.key
        sudo apt-key add llvm-snapshot.gpg.key > /dev/null
        # wget -O - https://apt.llvm.org/llvm-snapshot.gpg.key | sudo apt-key add -
        # sudo apt-key adv --fetch-keys https://apt.llvm.org/llvm-snapshot.gpg.key
        # sudo add-apt-repository 'deb http://apt.llvm.org/focal/ llvm-toolchain-focal-13 main'
        # echo "UPDATING"
        # (sudo apt-get update) 2> >(while read line; do (>&2 echo "STDERROR: $line"); done)
        # echo "INSTALLING CLANG"
        # (sudo apt-get install clang-13) 2> >(while read line; do (>&2 echo "STDERROR: $line"); done)
        # wget https://apt.llvm.org/llvm.sh
        # chmod +x llvm.sh
        # sudo ./llvm.sh 13
      fi

    displayName: "Setup Clang Version"
    failOnStderr: true
    env:
      CC: clang-${{ parameters.version }}
      CXX: clang++-${{ parameters.version }}
